引数をコールされる関数の中に渡すとき、実際にはこの値のコピーが渡されます。コールされる関数の中で引数に修正をくわえても、関数をコールした実引き数には何の変化もありません。数値の変化はコピーの上で行われるだけだからです。

この内容を検証するために、ひとつ例を見てみましょう


\begin{lstlisting}[numbers=none]
package main
import "fmt"

//引数+1を行う、簡単な関数
func add1(a int) int {
    a = a+1 // aの値を変更します。
    return a //新しい値を返します。
}

func main() {
    x := 3

    fmt.Println("x = ", x)  // "x = 3"と出力するはずです。

    x1 := add1(x)  //add1(x) をコールします。

    fmt.Println("x+1 = ", x1)
    // "x+1 = 4"　と出力するはずです。

    fmt.Println("x = ", x)
    // "x = 3" と出力するはずです。
}
\end{lstlisting}

どうです？\texttt{add1}関数をコールし、\texttt{add1}のなかで\texttt{a = a+1}の操作を実行したとしても、上述の\texttt{x}変数には何の変化も発生しません。

理由はとても簡単です：\texttt{add1}がコールされた際、\texttt{add1}が受け取る引数は\texttt{x}そのものではなく、\texttt{x}のコピーだからです。

もし本当にこの\texttt{x}そのものを渡したくなったらどうするの？と疑問に思うかもしれません。

この場合いわゆるポインタにまで話がつながります。我々は変数がメモリの中のある特定の位置に存在していることを知っています。変数を修正するということはとどのつまり変数のアドレスにあるメモリを修正していることになります。\texttt{add1}関数が\texttt{x}変数のアドレスを知ってさえいれば、\texttt{x}変数の値を変更することが可能です。そのため、我々は\texttt{x}の存在するアドレスである\texttt{\&x}を関数に渡し、関数の変数の型を\texttt{int}からポインタ変数である\texttt{*int}に変更します。これで関数の中で\texttt{x}の値を変更することができるようになりました。この時関数は依然としてコピーにより引数を受け渡しますが、コピーしているのはポインタになります。以下の例をご覧ください。

\begin{lstlisting}[numbers=none]
package main
import "fmt"

//引数に+1を行う簡単な関数
func add1(a *int) int { // ご注意ください。
    *a = *a+1 // aの値を修正しています。
    return *a // 新しい値を返します。
}

func main() {
    x := 3

    fmt.Println("x = ", x)  // "x = 3"と出力するはずです。

    x1 := add1(&x)
    // add1(&x) をコールしてxのアドレスを渡します。

    fmt.Println("x+1 = ", x1)
    // "x+1 = 4"を出力するはずです。

    fmt.Println("x = ", x)
    // "x = 4"を出力するはずです。
}
\end{lstlisting}

このように\texttt{x}を修正するという目的に到達しました。では、ポインタを渡す長所はなんなのでしょうか？

\begin{itemize}
  \item ポインタを渡すことで複数の関数が同じオブジェクトに対して操作を行うことができます。
  \item ポインタ渡しは比較的軽いです（8バイト）、ただのメモリのアドレスです。ポインタを使って大きな構造体を渡すことができます。もし値渡しを行なっていたら、相対的にもっと多くのシステムリソース（メモリと時間）を毎回のコピーで消費することになります。そのため大きな構造体を渡す際は、ポインタを使うのが賢い選択というものです。
  \item Go言語の\texttt{channel}、\texttt{slice}、\texttt{map}の３つの型はメカニズムを実現するポインタのようなものです。ですので、直接渡すことができますので、アドレスを取得してポインタを渡す必要はありません。（注：もし関数が\texttt{slice}の長さを変更する場合はアドレスを取得し、ポインタを渡す必要があります。）
\end{itemize}

