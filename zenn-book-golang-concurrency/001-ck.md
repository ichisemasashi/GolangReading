# はじめに {#はじめに .View_chapterTitle__tslMs}

# [](#%E3%81%93%E3%81%AE%E6%9C%AC%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6){.header-anchor-link} この本について {#%E3%81%93%E3%81%AE%E6%9C%AC%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6}

`for`文`if`文が重要で必要なのはわかるけど、`go`文がなんで用意されているのかがよくわからない。\
どうやら「並行処理」というものができるらしいけど、それができて何が嬉しいの？

......というのが、私が初めて`go`文によるゴールーチン作成を知ったときの感想です。\
私が競プロからプログラミングをかじり始めたということもあり、そこで出てこない並行処理という概念は完全に「お前誰や？？？」状態でした。

ちょっと勉強して、`go`文で並行にしたらどう嬉しくなるのか理解しましたが、だからといっていきなり`go`文を正しく使えるようにはなりません。\
sequentialな処理とは全然性質が違う、並行処理特有の落とし穴に落ちて「なんでや！」となって必死にデバッグしたり。

また、`go`文で複数個作られたゴールーチンが、どう順番に実行されているのか？というところが気になり始めると、途端に`G`とか`M`とか`P`とかいう専門用語が出てきて
\"What\'s this????\" となってまた必死に調べたり。

このように、自分が思った疑問に対する答えを見つけようといろいろ勉強して、また関連した周辺知識もついでに調べて、とやっていたら出来上がっていたのがこの本です。

## [](#%E6%9C%AC%E3%81%AE%E6%A7%8B%E6%88%90){.header-anchor-link} 本の構成 {#%E6%9C%AC%E3%81%AE%E6%A7%8B%E6%88%90}

### [](#2%E7%AB%A0%3A-%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86%E3%81%A8%E4%B8%A6%E5%88%97%E5%87%A6%E7%90%86){.header-anchor-link} 2章: 並行処理と並列処理 {#2%E7%AB%A0%3A-%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86%E3%81%A8%E4%B8%A6%E5%88%97%E5%87%A6%E7%90%86}

混同しやすい2つの言葉「並行処理」と「並列処理」の定義について論じ、Goで扱うのは「並行」処理の方であることを確認します。

また、そこから、

-   並行処理したら何が嬉しいの？
-   並行処理って難しいの？
-   正しく動かすためには何を気をつけるべきなの？

というマインド面について明らかにしていきます。

### [](#3%E7%AB%A0%3A-%E3%82%B4%E3%83%BC%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%A8%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB){.header-anchor-link} 3章: ゴールーチンとチャネル {#3%E7%AB%A0%3A-%E3%82%B4%E3%83%BC%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%A8%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB}

Goで並行処理するにあたり重要なコンポーネントになる、ゴールーチン・チャネル・`sync.WaitGroup`について説明します。

### [](#4%E7%AB%A0%3A-go%E3%81%A7%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86(%E5%9F%BA%E6%9C%AC%E7%B7%A8)){.header-anchor-link} 4章: Goで並行処理(基本編) {#4%E7%AB%A0%3A-go%E3%81%A7%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86(%E5%9F%BA%E6%9C%AC%E7%B7%A8)}

3章で説明したコンポーネントを利用しつつ正しく並行処理を実装するために知っておくべき事柄 -
具体的にはチャネルの性質・やりがちな初歩的なバグ等 -
について紹介します。

### [](#5%E7%AB%A0%3A-go%E3%81%A7%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86(%E5%BF%9C%E7%94%A8%E7%B7%A8)){.header-anchor-link} 5章: Goで並行処理(応用編) {#5%E7%AB%A0%3A-go%E3%81%A7%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86(%E5%BF%9C%E7%94%A8%E7%B7%A8)}

ゴールーチン・チャネル等を使って実現された様々な並行処理の具体例を、本やカンファレンスセッションの内容を引用することで紹介していきます。

### [](#6%E7%AB%A0%3A-%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86%E3%82%92%E6%94%AF%E3%81%88%E3%82%8Bgo%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0){.header-anchor-link} 6章: 並行処理を支えるGoランタイム {#6%E7%AB%A0%3A-%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86%E3%82%92%E6%94%AF%E3%81%88%E3%82%8Bgo%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0}

ここからはGoランタイムという、抽象的・低レイヤな話になっていきます。

ゴールーチンが複数個作られても、きちんとその全てが処理されるように実行を制御する仕組みがランタイムには備わっています。\
ここでは、Goのランタイムの挙動を理解するために必要な概念・部品についての情報をまとめています。

### [](#7%E7%AB%A0%3A-go%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%B1%E3%83%BC%E3%82%B9%E3%82%B9%E3%82%BF%E3%83%87%E3%82%A3){.header-anchor-link} 7章: Goランタイムケーススタディ {#7%E7%AB%A0%3A-go%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%B1%E3%83%BC%E3%82%B9%E3%82%B9%E3%82%BF%E3%83%87%E3%82%A3}

6章で紹介した概念を使って、Goランタイムの具体的な挙動について深掘りしていきます。

### [](#8%E7%AB%A0%3A-%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB%E3%81%AE%E5%86%85%E9%83%A8%E6%A7%8B%E9%80%A0){.header-anchor-link} 8章: チャネルの内部構造 {#8%E7%AB%A0%3A-%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB%E3%81%AE%E5%86%85%E9%83%A8%E6%A7%8B%E9%80%A0}

Goのランタイムの中で、チャネルがどう動いているのかについて説明しています。

### [](#9%E7%AB%A0%3A-(%E3%81%8A%E3%81%BE%E3%81%91)%E5%AE%9F%E8%A1%8C%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%88%86%E6%9E%90%E3%81%AE%E3%82%84%E3%82%8A%E6%96%B9){.header-anchor-link} 9章: (おまけ)実行ファイル分析のやり方 {#9%E7%AB%A0%3A-(%E3%81%8A%E3%81%BE%E3%81%91)%E5%AE%9F%E8%A1%8C%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%88%86%E6%9E%90%E3%81%AE%E3%82%84%E3%82%8A%E6%96%B9}

6\~8章と、ランタイムの挙動を探る過程において、時々「コンパイル後のGoプログラムの実行ファイルを解析する」という手法が出てきています。\
ここでは、それをどうやってやっていたのかについて残してあります。

### [](#10%E7%AB%A0%3A-%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86%E3%81%A7%E5%BD%B9%E7%AB%8B%E3%81%A4%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%26%E5%88%86%E6%9E%90%E6%89%8B%E6%B3%95){.header-anchor-link} 10章: 並行処理で役立つデバッグ&分析手法 {#10%E7%AB%A0%3A-%E4%B8%A6%E8%A1%8C%E5%87%A6%E7%90%86%E3%81%A7%E5%BD%B9%E7%AB%8B%E3%81%A4%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%26%E5%88%86%E6%9E%90%E6%89%8B%E6%B3%95}

ゴールーチンを使って並行処理を進めるにあたって、「いつ何が動いているのか？」といった情報が気になるときがあります。\
このときに役立つ各種デバッグ・分析手法について紹介します。

### [](#11%E7%AB%A0%3A-(%E3%81%8A%E3%81%BE%E3%81%91)%E4%BD%8E%E3%83%AC%E3%82%A4%E3%83%A4%E3%81%AE%E8%A9%B1-~linux%E3%81%A8%E3%81%AE%E6%AF%94%E8%BC%83~){.header-anchor-link} 11章: (おまけ)低レイヤの話 \~Linuxとの比較\~ {#11%E7%AB%A0%3A-(%E3%81%8A%E3%81%BE%E3%81%91)%E4%BD%8E%E3%83%AC%E3%82%A4%E3%83%A4%E3%81%AE%E8%A9%B1-~linux%E3%81%A8%E3%81%AE%E6%AF%94%E8%BC%83~}

Goのランタイムは「ゴールーチーンを適切にスケジューリングする」という側面において、OSと似た機能を持つともいえます。\
ここでは、少し本筋からは外れますが、「Linuxカーネルがプロセス・スレッド・シグナルをどう扱うのか」ということについて軽く掘り下げ、Goランタイムはそれに比較してどうか、という考察をしていきます。

## [](#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E7%92%B0%E5%A2%83%E3%83%BB%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3){.header-anchor-link} 使用する環境・バージョン {#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E7%92%B0%E5%A2%83%E3%83%BB%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3}

-   OS: macOS Catalina 10.15.7
-   go version go1.16.2 darwin/amd64

## [](#%E8%AA%AD%E8%80%85%E3%81%AB%E8%A6%81%E6%B1%82%E3%81%99%E3%82%8B%E5%89%8D%E6%8F%90%E7%9F%A5%E8%AD%98){.header-anchor-link} 読者に要求する前提知識 {#%E8%AA%AD%E8%80%85%E3%81%AB%E8%A6%81%E6%B1%82%E3%81%99%E3%82%8B%E5%89%8D%E6%8F%90%E7%9F%A5%E8%AD%98}

-   Goの基本的な文法の読み書きができること
-   基本情報技術者試験くらいのIT前提知識
:::
:::
:::

